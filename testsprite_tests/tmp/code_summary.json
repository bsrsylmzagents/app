{
  "project_name": "Travel Agency Management System (SaaS)",
  "project_type": "full-stack",
  "description": "Multi-tenant SaaS travel agency management system with modular architecture supporting tour and hotel management modules",
  "tech_stack": {
    "frontend": {
      "framework": "React 18.2.0",
      "routing": "React Router DOM 6.22.0",
      "styling": "Tailwind CSS 3.4.17",
      "ui_components": "Radix UI components",
      "state_management": "React Context API",
      "form_handling": "React Hook Form 7.56.2 with Zod 3.24.4",
      "http_client": "Axios 1.8.4",
      "build_tool": "CRACO 7.1.0 (Create React App)",
      "other": [
        "date-fns 3.6.0",
        "jspdf 2.5.2",
        "recharts 2.15.4",
        "xlsx 0.18.5",
        "sonner 2.0.3 (toast notifications)"
      ]
    },
    "backend": {
      "framework": "FastAPI 0.110.1",
      "database": "MongoDB (Motor 3.3.1 async driver)",
      "authentication": "JWT (PyJWT 2.10.1)",
      "password_hashing": "bcrypt 4.1.3",
      "server": "Uvicorn 0.25.0",
      "other": [
        "Pydantic 2.12.4",
        "python-dotenv 1.2.1",
        "Stripe 10.8.0",
        "APScheduler 3.10.4",
        "iCalendar 5.0.11"
      ]
    },
    "deployment": {
      "frontend": "Vercel/Render",
      "backend": "Render/Uvicorn"
    }
  },
  "architecture": {
    "pattern": "Modular SaaS with multi-tenant architecture",
    "frontend_structure": {
      "pages": "React components in src/pages/",
      "components": "Reusable UI components in src/components/",
      "modules": "Feature modules in src/modules/ (store, admin, hotels)",
      "routing": "React Router with protected routes",
      "api_integration": "Axios-based API client"
    },
    "backend_structure": {
      "main_server": "server.py (FastAPI application)",
      "modules": "Pluggable modules in backend/modules/",
      "middleware": "Module access control, CORS, authentication",
      "database": "MongoDB collections per feature",
      "background_jobs": "APScheduler for scheduled tasks"
    }
  },
  "features": {
    "core_features": [
      "Multi-tenant SaaS architecture (company-based isolation)",
      "User authentication and authorization (JWT)",
      "Company registration with auto-generated company codes",
      "Role-based access control (admin, staff, customer)"
    ],
    "reservation_management": [
      "Reservation CRUD operations",
      "Calendar view for reservations",
      "Reservation status tracking",
      "Pickup and dropoff management"
    ],
    "customer_management": [
      "Customer accounts (Cari accounts)",
      "Individual customers (Munferit)",
      "Customer transactions",
      "Customer detail pages",
      "Password management for customer accounts"
    ],
    "financial_management": [
      "Cash flow tracking (income/expense)",
      "Payment types configuration",
      "Debt/credit management (Cari accounts)",
      "Transaction logging",
      "Multi-currency support (EUR, USD, TRY)",
      "Automatic currency rate updates"
    ],
    "pricing": [
      "Seasonal pricing management",
      "Dynamic pricing based on dates",
      "Tour type pricing"
    ],
    "reporting": [
      "Daily reports",
      "Income reports",
      "Expense reports",
      "Cash flow reports",
      "Customer analysis",
      "Performance reports",
      "Reservation reports",
      "Profit/loss reports",
      "Creditor/debtor reports"
    ],
    "inventory": [
      "Vehicle management",
      "Service purchases tracking"
    ],
    "modular_system": {
      "module_purchase": "Stripe integration for module purchases",
      "module_access_control": "Middleware-based module access",
      "available_modules": ["tour", "hotel"],
      "feature_flags": "Module feature flags system"
    },
    "hotel_module": [
      "Hotel CRUD operations",
      "Room type management",
      "Hotel reservations",
      "ICS calendar sync (pull from external calendars)",
      "Push reservations to hotels (ICS, JSON, Email adapters)",
      "Retry queue for failed pushes",
      "Background scheduler for sync and queue processing"
    ],
    "store_module": [
      "Module listing page",
      "Stripe Checkout integration",
      "Payment success page",
      "Webhook handling for payment events"
    ],
    "admin_features": [
      "Staff management",
      "Company profile management",
      "Settings and preferences",
      "Module switching interface",
      "Security settings"
    ]
  },
  "api_endpoints": {
    "authentication": [
      "/api/auth/register",
      "/api/auth/login",
      "/api/auth/me"
    ],
    "reservations": "/api/reservations/*",
    "customers": "/api/customers/*",
    "cari_accounts": "/api/cari/*",
    "cash_flow": "/api/cash/*",
    "reports": "/api/reports/*",
    "hotels": "/api/hotels/*",
    "store": [
      "/api/store/modules",
      "/api/store/create-checkout-session",
      "/api/store/webhook"
    ],
    "settings": "/api/settings/*"
  },
  "database_collections": [
    "companies",
    "users",
    "reservations",
    "customers",
    "cari_accounts",
    "transactions",
    "cash_flow",
    "vehicles",
    "tour_types",
    "seasonal_prices",
    "billing_events",
    "module_feature_flags",
    "hotels",
    "hotel_rooms",
    "hotel_prices",
    "hotel_reservations",
    "hotel_ics_events",
    "hotel_reservation_push_queue",
    "hotel_reservation_push_logs"
  ],
  "authentication": {
    "method": "JWT (JSON Web Tokens)",
    "password_hashing": "bcrypt",
    "token_storage": "HTTP-only cookies or localStorage",
    "protected_routes": "AdminRoute component and middleware"
  },
  "environment_variables": {
    "backend": [
      "MONGO_URL",
      "DB_NAME",
      "JWT_SECRET_KEY",
      "CORS_ORIGINS",
      "MODULES_ENABLED",
      "STRIPE_SECRET_KEY",
      "STRIPE_WEBHOOK_SECRET",
      "HOTEL_ICS_SYNC_ENABLED",
      "HOTEL_ICS_SYNC_INTERVAL_SECONDS",
      "HOTEL_PUSH_QUEUE_INTERVAL_SECONDS",
      "SMTP_HOST",
      "SMTP_PORT",
      "SMTP_USER",
      "SMTP_PASSWORD",
      "SMTP_FROM"
    ],
    "frontend": [
      "REACT_APP_BACKEND_URL",
      "WDS_SOCKET_PORT",
      "REACT_APP_ENABLE_VISUAL_EDITS",
      "ENABLE_HEALTH_CHECK"
    ]
  },
  "ports": {
    "frontend": 3000,
    "backend": 8000
  },
  "testing": {
    "backend_tests": "pytest in backend/modules/tests/",
    "test_files": [
      "test_module_access.py",
      "test_billing_webhook.py",
      "test_hotel_push_queue.py",
      "test_ics_sync.py"
    ]
  },
  "deployment": {
    "frontend": "Vercel or Render",
    "backend": "Render with Uvicorn",
    "database": "MongoDB Atlas (cloud)"
  }
}



